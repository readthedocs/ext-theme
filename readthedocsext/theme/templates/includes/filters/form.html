<form class="ui secondary menu" action="." method="get">
  {% for field in fields %}
    {% if field.is_hidden %}
      <input type="hidden" name="{{ field.name }}" value="{% if field.value.0|length == 1 %}{{ field.value|default:"" }}{% else %}{{ field.value.0|default:"" }}{% endif %}" />
    {% else %}
      <div class="item">
        <div class="content">
          <div class="ui manual dropdown" data-bind="semanticui: {dropdown: filter_config}">
            <input type="hidden" name="{{ field.name }}" value="{% if field.value.0|length == 1 %}{{ field.value|default:"" }}{% else %}{{ field.value.0|default:"" }}{% endif %}" />
            <div class="ui sub header">
              {{ field.label|safe }}
              <i class="fa-solid fa-caret-down small icon"></i>
            </div>
            <div class="text">
              {{ field.field.empty_label|safe }}
            </div>
            <div class="menu">
              {% for value, label in field.field.widget.choices %}
                <a class="item" data-value="{{ value }}">{{ label|safe }}</a>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    {% endif %}
  {% endfor %}
</form>
