{% extends "profiles/base_profile_edit.html" %}

{% load i18n %}

{% block title %}{% trans "Connected Services" %}{% endblock %}

{% block edit_content_header %} {% trans "Connected Services" %} {% endblock %}

{% block profile-admin-social-accounts %}active{% endblock %}

{% block edit_content %}


      <p>
        {% blocktrans trimmed %}
          The following services are currently connected to your account:
        {% endblocktrans %}
      </p>

    {% if form.accounts %}
      <div class="ui list">

        {% for base_account in form.accounts %}
          {% with base_account.get_provider_account as account %}
            <div class="item">

              <img src="{{ base_account.get_avatar_url }}" class="account-gravatar" height=24 width=24 />

              <span>
                {{ account }}
                <span class="{{ base_account.provider }} {{ account.get_brand.id }}">
                  ({{ account.get_brand.name }})
                </span>
              </span>

              <div class="ui list">
                <div class="item">
                  <form method="post" action="{% url 'socialaccount_connections' %}">
                    {% csrf_token %}
                    <input type="hidden" name="account" value="{{ base_account.id }}" />
                    <input type="submit" name="submit" value="{% trans 'Disconnect' %}" />
                  </form>
                </div>
              </div>

              {% if base_account.provider == 'bitbucket' %}
                <p class="ui negative message">
                  {% blocktrans trimmed %}
                    The API version this connection uses is no longer
                    supported, please reconnect your Bitbucket account.
                  {% endblocktrans %}
                </p>
              {% endif %}

              </div>
          {% endwith %}
        {% endfor %}

          </div>

    {% else %}
      <div class="ui list">
        <div class="item">
          <p>{% trans 'You currently have no social network accounts connected to this account.' %}</p>
        </div>
      </div>
    {% endif %}



  <div class="ui relaxed list">
    {% include "socialaccount/snippets/provider_list.html" with process="connect" next="" %}
  </div>

  {% include "socialaccount/snippets/login_extra.html" %}

{% endblock %}
